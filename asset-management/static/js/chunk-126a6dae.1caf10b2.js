(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-126a6dae"],{"04f3":function(e,t,a){},"278f":function(e,t,a){"use strict";var s=a("97d6");a.n(s).a},4958:function(e,t,a){"use strict";var s=a("04f3");a.n(s).a},"4d4b":function(e,t,a){"use strict";var s=a("dabf");a.n(s).a},"55e4":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s=[{title:"楼栋名称--1",dataIndex:"assetName1"},{title:"房屋名称--2",dataIndex:"assetName2"},{title:"资产名称",dataIndex:"assetName"},{title:"资产编码",dataIndex:"assetCode"},{title:"建筑面积--3",dataIndex:"assetName3"},{title:"坐落位置--4",dataIndex:"assetName4"},{title:"权属情况",dataIndex:"ownershipStatus"},{title:"权证号",dataIndex:"warrantNbr"},{title:"装修情况--5",dataIndex:"assetName5"},{title:"资产原值",dataIndex:"originalValue"},{title:"市场价值",dataIndex:"marketValue"},{title:"转运营日期",dataIndex:"transferOperationTime"},{title:"转运营面积",dataIndex:"transferOperationArea"},{title:"闲置面积",dataIndex:"idleArea"},{title:"自用面积",dataIndex:"selfUserArea"},{title:"占用面积",dataIndex:"occupationArea"},{title:"其他面积",dataIndex:"otherArea"},{title:"转物业面积",dataIndex:"transferArea"},{title:"转物业日期",dataIndex:"transferTime"},{title:"使用期限(月)",dataIndex:"validPeriod"},{title:"开始使用日期",dataIndex:"startDate"},{title:"已使用期数(月)",dataIndex:"usedDate"}]},"5f43":function(e,t,a){"use strict";var s=a("eb11");a.n(s).a},"73b2":function(e,t,a){"use strict";var s=a("dea4"),n=(a("4634"),a("8f42"),a("791f")),o=a("fa7d"),r=[{title:"资产编码",dataIndex:"assetCode"},{title:"资产名称",dataIndex:"assetName"},{title:"所属机构",dataIndex:"organName"},{title:"资产项目",dataIndex:"projectName"},{title:"资产类型",dataIndex:"assetTypeName"},{title:"资产分类",dataIndex:"assetCategoryName"},{title:"所在位置",dataIndex:"address"},{title:"资产状态",dataIndex:"assetStatusName"},{title:"配套数量",dataIndex:"approvalStatusName"}],l={components:{Cephalosome:n.a},props:{organId:{type:[String,Number],default:""}},data:function(){return{columns:r,loading:!1,noPageTools:!0,location:"absolute",count:"",projectData:[{name:"全部资产项目",value:""}],typeData:[{name:"全部资产类型",value:""}],objectTypeData:[{name:"全部资产类型",value:""}],statusData:[{name:"全部资产状态",value:""}],allStyle:"width: 140px; margin-right: 10px;",show:!1,selecData:{assetType:"",objectType:"",assetNameCodeCode:"",queryType:"1",projectId:"",pageSize:10,pageNum:1},tableData:[],selectedRowKeys:[],overallData:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,hideDefaultSelections:!0,onSelection:this.onSelection}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},statusFn:function(){var e=this;if(this.selectedRowKeys.length<=0)this.$message.info("请先选择资产");else{var t=[],a=[];this.selectedRowKeys.forEach((function(s){e.overallData.forEach((function(e,n){s===e.assetCode&&(t.push(e.assetCode),a.push(e))}))})),this.$emit("status",t,a)}},redactCheckedDataFn:function(e){var t=this;this.$nextTick((function(){t.selectedRowKeys=e}))},handleCancel:function(){this.show=!1},getObjectKeyValueByOrganIdFn:function(){var e=this,t={organId:this.organId,projectName:""};this.$api.assets.getObjectKeyValueByOrganId(t).then((function(t){if(0===Number(t.data.code)){var a=t.data.data,n=[];a.forEach((function(e){n.push({name:e.projectName,value:e.projectId})})),e.projectData=[].concat(Object(s.a)(e.projectData),n)}else e.$message.error(t.data.message)}))},query:function(){var e=this;this.loading=!0;var t=this.selecData;this.$api.assets.assetListPage(t).then((function(t){if(0===Number(t.data.code)){var a=t.data.data.data;if(a){var s=o.e.deepClone(e.overallData);a.forEach((function(e,t){e.key=e.assetCode,s.push(e)})),e.tableData=a,e.count=t.data.data.count,e.$nextTick((function(){var t={};s=s.reduce((function(e,a){return t[a.assetCode]||(t[a.assetCode]=e.push(a)),e}),[]),e.overallData=s}))}else e.data=[];e.loading=!1}else e.$message.error(t.data.message),e.loading=!1}))},handleChange:function(e){this.selecData.pageNum=e.pageNo,this.selecData.pageSize=e.pageLength,this.query()},approvalStatusFn:function(){}},created:function(){},mounted:function(){this.getObjectKeyValueByOrganIdFn(),this.query()}},i=(a("4958"),a("6691")),c=Object(i.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SG-Modal",{staticClass:"assetBundlePopover",attrs:{width:"1030px",title:"选择资产"},on:{ok:e.statusFn,cancel:e.handleCancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("div",[a("Cephalosome",{staticClass:"Cephalosome",attrs:{rightCol:23,leftCol:1,rowHeight:"48px"}},[a("div",{attrs:{slot:"col-r"},slot:"col-r"},[a("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产项目",defaultValue:e.selecData.projectId},on:{change:e.approvalStatusFn}},e._l(e.projectData,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产类型",defaultValue:e.selecData.assetType},on:{change:e.approvalStatusFn}},e._l(e.typeData,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产类别",defaultValue:e.selecData.objectType},on:{change:e.approvalStatusFn}},e._l(e.objectTypeData,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("a-input",{staticStyle:{width:"140px",margin:"0 10px"},attrs:{placeholder:"资产名称/编码"},model:{value:e.selecData.assetNameCode,callback:function(t){e.$set(e.selecData,"assetNameCode",t)},expression:"selecData.assetNameCode"}}),a("SG-Button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)]),a("div",{staticClass:"tab-nav"},[a("div",{staticClass:"table-border table-layout-fixed"},[a("a-table",{staticClass:"custom-table td-pd10",attrs:{rowSelection:e.rowSelection,loading:e.loading,columns:e.columns,dataSource:e.tableData,pagination:!1}}),a("SG-FooterPagination",{attrs:{pageLength:e.selecData.pageSize,totalCount:e.count,noPageTools:e.noPageTools},on:{change:e.handleChange},model:{value:e.selecData.pageNum,callback:function(t){e.$set(e.selecData,"pageNum",t)},expression:"selecData.pageNum"}})],1)])],1)])}),[],!1,null,"6fb0e280",null);t.a=c.exports},"791f":function(e,t,a){"use strict";a("8f42");var s=a("4e72"),n={components:{ARow:s.Row,ACol:s.Col},props:{rowHeight:{type:String,default:"67px"},leftCol:{type:Number,default:6},rightCol:{type:Number,default:18}},data:function(){return{}},computed:{},methods:{},created:function(){},mounted:function(){}},o=(a("4d4b"),a("6691")),r=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",style:{height:e.rowHeight}},[a("a-row",[a("a-col",{staticClass:"col-l nav",style:{height:e.rowHeight},attrs:{span:e.leftCol}},[e._t("col-l")],2),a("a-col",{staticClass:"col-r nav",style:{height:e.rowHeight},attrs:{span:e.rightCol}},[a("div",{staticClass:"commom"},[e._t("col-r")],2)])],1)],1)}),[],!1,null,"121da83b",null);t.a=r.exports},9760:function(e,t,a){"use strict";a.r(t),a("efce"),a("ed8b"),a("8f42"),a("4634");var s=a("97a3"),n=a("dea4"),o=a("73b2"),r=a("b85b"),l=a("c32d"),i=a.n(l),c=a("55e4");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}var u={saveRegisterOrder:"",assetType:"",projectId:"",createTime:{},remark:"",files:[],organId:""},p=[{value:"1",name:"房屋"},{value:"2",name:"土地"},{value:"3",name:"设备"}],m=[{value:"1",name:"楼栋"},{value:"2",name:"房屋"}],f={components:{AssetBundlePopover:o.a,FormFooter:r.a},props:{},data:function(){return{buildIds:["0"],buildIdsData:[{name:"楼栋01",value:"0"},{name:"楼栋02",value:"1"}],checkboxAssetType:"1",scope:[],modalShow:!1,checkboxData:[].concat(p),scopeData:[].concat(m),enitData:"",checkedData:[],show:!1,columns:Object(n.a)(c.a),tableData:[],organIdData:[],assetTypeData:[{name:"交付运营",value:"jfyy"},{name:"交付物业",value:"jfwy"},{name:"原值变动",value:"yzbd"},{name:"使用方向变动",value:"fxbd"},{name:"位置变动",value:"wzbd"},{name:"资产项目变动",value:"xmbd"}],projectIdData:[{name:"资产项目",value:"1"}],newEditSingleData:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u),form:this.$form.createForm(this),allWidth:"width: 160px",widthBox:"width: 80%",formItemTextarea:{labelCol:{xs:{span:24},sm:{span:2}}},formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}}}},computed:{},methods:{addTheAsset:function(){},downloadTemplate:function(){this.modalShow=!0},commonFn:function(){var e=this,t={assetType:this.assetType,buildIds:this.buildIds,scope:this.scope};this.$api.assets.downloadTemplate(t).then((function(t){var a=new Blob([t.data]),s=document.createElement("a");s.href=URL.createObjectURL(a),s.download="资产登记模板.xls",s.style.display="none",document.body.appendChild(s),s.click(),s.remove(),e.modalShow=!1}))},onChange:function(){},assetTypeChange:function(e){this.assetType=e},filterOption:function(e,t){return 0<=t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())},handleSubmit:function(e){e.preventDefault(),this.form.validateFields((function(e,t){}))},deleteFn:function(e){var t=this;this.tableData.forEach((function(a,s){a.assetCode===e.assetCode&&t.tableData.splice(s,1)})),this.checkedData.forEach((function(a,s){e.assetCode===a&&t.checkedData.splice(s,1)}))},save:function(){var e=this;this.form.validateFields((function(t,a){if(!t){if(e.tableData.length<=0)return void e.$message.info("请选择资产明细");var s={registerOrderId:"",saveRegisterOrder:a.saveRegisterOrder,projectId:a.projectId,assetType:a.assetType,remark:a.remark,organId:a.organId,createTime:"".concat(a.createTime.format("YYYY-MM-DD")),assetHouseList:[]};"edit"===e.setType?e.$api.assets.updateRegisterOrder(s).then((function(e){Number(e.data.code)})):e.$api.assets.saveRegisterOrder(s).then((function(e){Number(e.data.code)}))}}))},cancel:function(){this.$router.push({path:"/asset-management/#/assetRegister"})},editFn:function(){var e=this,t={registerOrderId:this.registerOrderId};this.$api.assets.getRegisterOrderById(t).then((function(t){if(0===Number(t.data.code)){var a=t.data.data;e.form.setFieldsValue({projectId:a.projectId,registerOrderCode:a.registerOrderCode,assetType:String(a.assetType),createTime:i()(a.createTime,"YYYY-MM-DD"),remark:a.remark})}else e.$message.error(t.data.message)}))},getRegisterOrderDetailsByIdFn:function(){var e=this,t={registerOrderId:this.registerOrderId};this.$api.assets.getRegisterOrderDetailsById(t).then((function(t){if(0===Number(t.data.code)){var a=t.data.data;a.forEach((function(e,t){e.key=t})),e.$nextTick((function(){e.tableData=a}))}else e.$message.error(t.data.message)}))}},created:function(){this.organIdData=JSON.parse(this.$route.query.record),this.setType=this.$route.query.setType},mounted:function(){"edit"===this.setType&&(this.enitData=JSON.parse(this.$route.query.enitData),this.editFn(),this.getRegisterOrderDetailsByIdFn())}},h=(a("278f"),a("6691")),v=Object(h.a)(f,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"newEditSingle"},[a("div",{staticClass:"newEditSingle-nav"},[a("span",{staticClass:"section-title blue"},[e._v("基础信息")]),a("a-row",{staticClass:"playground-row"},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-col",{staticClass:"playground-col",attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"登记单编号"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["saveRegisterOrder",{rules:[{required:!0,max:50,whitespace:!0,message:"请输入登记单编号(不超过50字符)"}],initialValue:e.newEditSingleData.title}],expression:"['saveRegisterOrder',\n              {rules: [{required: true, max: 50, whitespace: true, message: '请输入登记单编号(不超过50字符)'}], initialValue: newEditSingleData.title}\n            ]"}],style:e.allWidth,attrs:{placeholder:"请输入登记单编号",max:10}})],1)],1),a("a-col",{staticClass:"playground-col",attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"资产项目："}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectId",{rules:[{required:!0,message:"请选择资产项目"}],initialValue:e.newEditSingleData.projectId}],expression:"['projectId',{\n                  rules: [{required: true, message: '请选择资产项目'}],\n                  initialValue: newEditSingleData.projectId\n                }]"}],style:e.allWidth,attrs:{showSearch:"",placeholder:"请选择资产项目",allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到资产项目"}},e._l(e.projectIdData,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1)],1),a("a-col",{staticClass:"playground-col",attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"资产类型："}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetType",{rules:[{required:!0,message:"请选择资产类型"}],initialValue:e.newEditSingleData.assetType}],expression:"['assetType',{\n                  rules: [{required: true, message: '请选择资产类型'}],\n                  initialValue: newEditSingleData.assetType\n                }]"}],style:e.allWidth,attrs:{showSearch:"",placeholder:"请选择资产类型",allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到资产类型"},on:{change:e.assetTypeChange}},e._l(e.assetTypeData,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n                "+e._s(t.name)+"\n              ")])})),1)],1)],1),a("a-col",{staticClass:"playground-col",attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"接管日期："}},"a-form-item",e.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["createTime",{rules:[{required:!0,message:"请选择接管日期"}]}],expression:"['createTime',\n              {rules: [{required: true, message: '请选择接管日期'}]}\n            ]"}],style:e.allWidth,attrs:{placeholder:"请选择接管日期"}})],1)],1),a("a-col",{staticClass:"playground-col",attrs:{span:24}},[a("a-form-item",e._b({attrs:{label:"备注"}},"a-form-item",e.formItemTextarea,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{required:!1,max:200,message:"请输入问题备注(不超过200字符)"}],initialValue:e.newEditSingleData.remark}],expression:"['remark',\n              {rules: [{required: false, max: 200, message: '请输入问题备注(不超过200字符)'}], initialValue: newEditSingleData.remark}\n              ]"}],style:e.widthBox,attrs:{placeholder:"请输入备注",autosize:{minRows:2,maxRows:4}}})],1)],1),a("a-col",{staticClass:"playground-col",attrs:{span:24}},[a("a-form-item",e._b({attrs:{label:"上传附件："}},"a-form-item",e.formItemTextarea,!1),[a("SG-UploadFile",{attrs:{type:"all"},model:{value:e.newEditSingleData.files,callback:function(t){e.$set(e.newEditSingleData,"files",t)},expression:"newEditSingleData.files"}})],1)],1)],1)],1),a("div",{staticClass:"tab-nav"},[a("span",{staticClass:"section-title blue"},[e._v("资产明细")]),a("div",{staticClass:"button-box"},[a("div",{staticClass:"buytton-nav"},[a("SG-Button",{attrs:{type:"primary",weaken:""},on:{click:e.downloadTemplate}},[e._v("下载模板")]),a("SG-Button",{staticClass:"choice",attrs:{type:"primary",weaken:""},on:{click:e.addTheAsset}},[e._v("导入资产清单")]),a("SG-Button",{attrs:{type:"primary",weaken:""},on:{click:e.addTheAsset}},[e._v("清空列表")])],1)]),a("div",{staticClass:"table-border"},[a("a-table",{staticClass:"custom-table td-pd10",attrs:{scroll:{y:450,x:2600},columns:e.columns,dataSource:e.tableData,pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,s){return[a("span",{staticClass:"postAssignment-icon",on:{click:function(t){return e.deleteFn(s)}}},[e._v("删除")])]}}])})],1)])],1),a("FormFooter",[a("a-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")]),a("a-button",{on:{click:e.cancel}},[e._v("取消")])],1),a("SG-Modal",{attrs:{width:"500px",okText:"下载模板",title:"下载模板"},on:{ok:e.commonFn},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("div",[a("div",{staticClass:"modal-nav"},[a("a-radio-group",{model:{value:e.checkboxAssetType,callback:function(t){e.checkboxAssetType=t},expression:"checkboxAssetType"}},[e._v("\n          资产类型："),e._l(e.checkboxData,(function(t,s){return a("a-radio",{key:s,attrs:{disabled:"",value:t.value}},[e._v(e._s(t.name))])}))],2)],1),e._v("\n      楼栋名称："),a("a-select",{staticStyle:{width:"300px"},attrs:{maxTagCount:4,mode:"multiple",placeholder:"楼栋名称",defaultValue:e.buildIds}},e._l(e.buildIdsData,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("div",{staticClass:"modal-nav"},[a("a-checkbox-group",{on:{change:e.onChange},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},[e._v("\n          数据范围："),e._l(e.scopeData,(function(t,s){return a("a-checkbox",{key:s,attrs:{value:t.value}},[e._v(e._s(t.name))])}))],2)],1)],1)])],1)}),[],!1,null,"9f9bffd8",null);t.default=v.exports},"97d6":function(e,t,a){},b85b:function(e,t,a){"use strict";var s={name:"FormFooter",components:{AButton:a("4e72").Button},props:{rightButtonName:{type:String,default:"取消"},leftButtonName:{type:String,default:"提交"},showSave:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},rightButtonType:{type:String,default:"default"}},data:function(){return{}}},n=(a("5f43"),a("6691")),o=Object(n.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-footer"},[e._t("default",[e.showSave?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("save")}}},[e._v(e._s(e.leftButtonName))]):e._e(),e.showCancel?a("a-button",{attrs:{type:e.rightButtonType},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.rightButtonName))]):e._e()])],2)}),[],!1,null,"7f311a34",null);t.a=o.exports},dabf:function(e,t,a){},eb11:function(e,t,a){}}]);