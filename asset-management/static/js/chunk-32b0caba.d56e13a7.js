(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-32b0caba"],{"19bd":function(e,t,a){"use strict";a("efce"),a("4634"),a("ed8b");var n=a("97a3"),r=a("dea4");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}a("7cfd"),a("8f42");var i={components:{},props:{default:{type:Boolean,default:!0},allowClear:{type:Boolean,default:!0},placeholder:{type:String,default:"请选择组织机构树"},typeFilter:{type:String,default:""},value:{type:[String,Number],default:""},disabled:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},treeCheckable:{type:Boolean,default:!1},treeDefaultExpandAll:{type:Boolean,default:!1},dropdownStyle:{type:Object,default:function(){return{maxHeight:"400px",overflow:"auto"}}}},data:function(){return{organId:"",treeData:[]}},computed:{},methods:{initDepartment:function(){var e=this;this.$api.assets.queryAsynOrganByUserId({parentOrganId:"",typeFilter:this.typeFilter}).then((function(t){0===Number(t.data.code)&&(e.treeData=e.mapTreeNodes(t.data.data),e.default&&(e.organId=e.treeData[0].organId,e.organName=e.treeData[0].name,e.$emit("changeTree",e.organId,e.organName)))}))},onLoadData:function(e){var t=this;return new Promise((function(a){t.$api.assets.queryAsynOrganByUserId({parentOrganId:e.value,typeFilter:t.typeFilter}).then((function(n){if(0===Number(n.data.code)){var o=t.mapTreeNodes(n.data.data);t.setTree(e.value,t.treeData,o),t.treeData=Object(r.a)(t.treeData),a()}}))}))},setTree:function(e,t,a){for(var n=0;n<t.length;n++){if(Number(t[n].key)===Number(e))return void(t[n].children=Object(r.a)(a));t[n].children&&0<t[n].children.length&&this.setTree(e,t[n].children,a)}},mapTreeNodes:function(e){return e.map((function(e){var t=e.organId,a=e.name;return e.title=a,e.key=t,e.value=e.organId,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}))},changeTree:function(e,t){this.multiple?(this.$emit("changeTree",e,t),this.organName=t):(this.$emit("changeTree",e,t[0]),this.organName=t[0]),this.organId=e}},created:function(){},mounted:function(){this.organId=this.value,this.initDepartment()}},l=a("6691"),s=Object(l.a)(i,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("a-tree-select",{attrs:{multiple:e.multiple,showSearch:e.showSearch,dropdownStyle:e.dropdownStyle,treeData:e.treeData,placeholder:e.placeholder,allowClear:e.allowClear,loadData:e.onLoadData,disabled:e.disabled,treeCheckable:e.treeCheckable,treeDefaultExpandAll:e.treeDefaultExpandAll},on:{change:e.changeTree},model:{value:e.organId,callback:function(t){e.organId=t},expression:"organId"}})}),[],!1,null,"276f30da",null);t.a=s.exports},"36c1":function(e,t,a){"use strict";var n=a("8270");a.n(n).a},"4d4b":function(e,t,a){"use strict";var n=a("dabf");a.n(n).a},"791f":function(e,t,a){"use strict";a("8f42");var n=a("4e72"),r={components:{ARow:n.Row,ACol:n.Col},props:{rowHeight:{type:String,default:"67px"},leftCol:{type:Number,default:6},rightCol:{type:Number,default:18}},data:function(){return{}},computed:{},methods:{},created:function(){},mounted:function(){}},o=(a("4d4b"),a("6691")),i=Object(o.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper",style:{height:e.rowHeight}},[a("a-row",[a("a-col",{staticClass:"col-l nav",style:{height:e.rowHeight},attrs:{span:e.leftCol}},[e._t("col-l")],2),a("a-col",{staticClass:"col-r nav",style:{height:e.rowHeight},attrs:{span:e.rightCol}},[a("div",{staticClass:"commom"},[e._t("col-r")],2)])],1)],1)}),[],!1,null,"121da83b",null);t.a=i.exports},"7cfd":function(e,t,a){var n=a("d3d8").f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||a("f9a5")&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},8270:function(e,t,a){},"9b07":function(e,t,a){"use strict";a.r(t),a("4634"),a("8f42");var n=a("791f"),r=a("19bd"),o=a("c32d"),i=a.n(o),l=[{name:"草稿",value:"0"},{name:"待审批",value:"2"},{name:"已驳回",value:"3"},{name:"已审批",value:"1"},{name:"已取消",value:"4"}],s=[{title:"登记单编号",dataIndex:"registerOrderCode"},{title:"管理机构",dataIndex:"organName"},{title:"资产项目名称",dataIndex:"projectName"},{title:"资产类型",dataIndex:"assetType"},{title:"资产数量",dataIndex:"assetNum"},{title:"创建日期",dataIndex:"createDate"},{title:"状态",dataIndex:"approvalStatus"},{title:"操作",dataIndex:"operation",width:150,scopedSlots:{customRender:"operation"}}],u={components:{Cephalosome:n.a,TreeSelect:r.a},props:{},data:function(){return{commonShow:!1,commonTitle:"",judge:"",loading:!1,noPageTools:!0,location:"absolute",approvalStatusData:[].concat(l),allStyle:"width: 140px; margin-right: 10px;",columns:s,organName:"",organId:"",tableData:[],queryCondition:{approvalStatus:["0","1","2","3","4"],pageNum:1,pageSize:10,projectId:"",organId:1,assetType:"",createDateS:"",crateDateE:"",isCurrent:!1},defaultValue:[i()(new Date-7776e6),i()(new Date)],count:"",assetTypeData:[{name:"全部变动类型",value:""}],projectData:[{name:"全部资产项目",value:""}]}},computed:{},methods:{newChangeSheetFn:function(){var e=JSON.stringify([{value:this.queryCondition.organId,name:this.organName}]);this.$router.push({path:"/assetRegister/newEditSingle",query:{record:e,setType:"new"}})},operationFn:function(e,t){if("particulars"===t){var a=JSON.stringify([e]);this.$router.push({path:"/assetRegister/particulars",query:{record:a,setType:"particulars"}})}else if("delete"===t)this.commonTitle="删除",this.registerOrderId=e.registerOrderId,this.judge="delete",this.commonShow=!0;else if("theAudit"===t)this.commonTitle="反审核",this.judge="theAudit",this.registerOrderId=e.registerOrderId,this.commonShow=!0;else if("edit"===t){var n=JSON.stringify([{value:this.queryCondition.organId,name:this.organName}]),r=JSON.stringify([e]);this.$router.push({path:"/assetRegister/newEditSingle",query:{record:n,enitData:r,setType:"edit"}})}},commonFn:function(){var e=this;if("delete"===this.judge){var t={registerOrderId:this.registerOrderId};this.$api.assets.deleteByRegisterOrderId(t).then((function(t){0===Number(t.data.code)?(e.$message.error("删除成功"),e.commonShow=!1,e.query()):(e.$message.error(t.data.message),e.commonShow=!1)}))}else if("theAudit"===this.judge){var a={registerOrderId:this.registerOrderId};this.$api.assets.registerOrderReAudit(a).then((function(t){0===Number(t.data.code)?(e.$message.error("反审核成功"),e.commonShow=!1,e.query()):(e.$message.error(t.data.message),e.commonShow=!1)}))}},changeTree:function(e,t){this.organName=t,this.queryCondition.organId=e},checkboxFn:function(e){this.queryCondition.isCurrent=e.target.checked},approvalStatusFn:function(){},handleChange:function(e){this.queryCondition.pageNum=e.pageNo,this.queryCondition.pageSize=e.pageLength,this.query()},query:function(){var e=this;this.loading=!0;var t={pageNum:this.queryCondition.pageNum,pageSize:this.queryCondition.pageSize,approvalStatus:0<this.queryCondition.approvalStatus.length?this.queryCondition.approvalStatus.join(","):"",projectId:this.queryCondition.projectId,organId:this.queryCondition.organId,assetType:0<this.queryCondition.assetType?this.queryCondition.assetType.join(","):"",createDateS:i()(this.defaultValue[0]).format("YYYY-MM-DD"),crateDateE:i()(this.defaultValue[1]).format("YYYY-MM-DD"),isCurrent:this.queryCondition.isCurrent};this.$api.assets.getProjectListPage(t).then((function(t){if(0===Number(t.data.code)){var a=t.data.data.data;a.forEach((function(e,t){e.key=t})),e.tableData=a,e.count=t.data.data.count,e.loading=!1}else e.$message.error(t.data.message),e.loading=!1}))}},created:function(){},mounted:function(){this.query()}},c=(a("36c1"),a("6691")),d=Object(c.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"assetRegister"},[a("Cephalosome",{attrs:{rightCol:22,leftCol:2}},[a("div",{attrs:{slot:"col-l"},slot:"col-l"},[a("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:e.newChangeSheetFn}},[e._v("新建登记单")])],1),a("div",{attrs:{slot:"col-r"},slot:"col-r"},[a("treeSelect",{style:e.allStyle,attrs:{placeholder:"请选择组织机构",allowClear:!1},on:{changeTree:e.changeTree}}),a("a-checkbox",{attrs:{value:e.queryCondition.isCurrent},on:{change:e.checkboxFn}},[e._v("仅当前机构下资产变动单")]),a("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产项目",defaultValue:e.queryCondition.projectId},on:{change:e.approvalStatusFn}},e._l(e.projectData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("a-select",{style:e.allStyle,attrs:{maxTagCount:1,mode:"multiple",placeholder:"全部变动类型",defaultValue:e.queryCondition.assetType},on:{change:e.approvalStatusFn}},e._l(e.assetTypeData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("a-select",{staticStyle:{width:"160px","margin-right":"10px"},attrs:{maxTagCount:1,mode:"multiple",placeholder:"全部状态",defaultValue:e.queryCondition.approvalStatus},on:{change:e.approvalStatusFn}},e._l(e.approvalStatusData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.value}},[e._v(e._s(t.name))])})),1),a("div",{staticClass:"box"},[a("SG-DatePicker",{staticStyle:{width:"200px"},attrs:{label:"创建日期",pickerType:"RangePicker",format:"YYYY-MM-DD"},model:{value:e.defaultValue,callback:function(t){e.defaultValue=t},expression:"defaultValue"}})],1),a("SG-Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)]),a("div",{staticClass:"table-layout-fixed"},[a("a-table",{staticClass:"custom-table td-pd10",attrs:{loading:e.loading,columns:e.columns,dataSource:e.tableData,pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(t,n){return[a("div",{staticClass:"tab-opt"},[a("span",{on:{click:function(t){return e.operationFn(n,"particulars")}}},[e._v("详情")]),0==+n.approvalStatus||3==+n.approvalStatus?a("span",{on:{click:function(t){return e.operationFn(n,"edit")}}},[e._v("编辑")]):e._e(),0==+n.approvalStatus||3==+n.approvalStatus?a("span",{on:{click:function(t){return e.operationFn(n,"delete")}}},[e._v("删除")]):e._e(),2==+n.approvalStatus?a("span",[e._v("审核")]):e._e(),1==+n.approvalStatus?a("span",{on:{click:function(t){return e.operationFn(n,"theAudit")}}},[e._v("反审核")]):e._e()])]}}])}),a("SG-FooterPagination",{attrs:{pageLength:e.queryCondition.pageSize,totalCount:e.count,location:e.location,noPageTools:e.noPageTools},on:{change:e.handleChange},model:{value:e.queryCondition.pageNum,callback:function(t){e.$set(e.queryCondition,"pageNum",t)},expression:"queryCondition.pageNum"}})],1),a("SG-Modal",{attrs:{width:"400px",title:e.commonTitle},on:{ok:e.commonFn},model:{value:e.commonShow,callback:function(t){e.commonShow=t},expression:"commonShow"}},["delete"===e.judge?a("div",[e._v("确认要删除该资产登记单吗？")]):a("div",[e._v("确认要反审核该资产登记单吗？")])])],1)}),[],!1,null,"1e1804c8",null);t.default=d.exports},dabf:function(e,t,a){}}]);