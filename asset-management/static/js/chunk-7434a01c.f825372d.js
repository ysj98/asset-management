(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7434a01c"],{"04f3":function(e,a,t){},4958:function(e,a,t){"use strict";var s=t("04f3");t.n(s).a},"4d4b":function(e,a,t){"use strict";var s=t("dabf");t.n(s).a},"5f43":function(e,a,t){"use strict";var s=t("eb11");t.n(s).a},"73b2":function(e,a,t){"use strict";var s=t("dea4"),l=(t("4634"),t("8f42"),t("791f")),i=t("fa7d"),n=[{title:"资产编码",dataIndex:"assetCode"},{title:"资产名称",dataIndex:"assetName"},{title:"所属机构",dataIndex:"organName"},{title:"资产项目",dataIndex:"projectName"},{title:"资产类型",dataIndex:"assetTypeName"},{title:"资产分类",dataIndex:"assetCategoryName"},{title:"所在位置",dataIndex:"address"},{title:"资产状态",dataIndex:"assetStatusName"},{title:"配套数量",dataIndex:"approvalStatusName"}],o={components:{Cephalosome:l.a},props:{organId:{type:[String,Number],default:""}},data:function(){return{columns:n,loading:!1,noPageTools:!0,location:"absolute",count:"",projectData:[{name:"全部资产项目",value:""}],typeData:[{name:"全部资产类型",value:""}],objectTypeData:[{name:"全部资产类型",value:""}],statusData:[{name:"全部资产状态",value:""}],allStyle:"width: 140px; margin-right: 10px;",show:!1,selecData:{assetType:"",objectType:"",assetNameCodeCode:"",queryType:"1",projectId:"",pageSize:10,pageNum:1},tableData:[],selectedRowKeys:[],overallData:[]}},computed:{rowSelection:function(){return{selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectChange,hideDefaultSelections:!0,onSelection:this.onSelection}}},methods:{onSelectChange:function(e){this.selectedRowKeys=e},statusFn:function(){var e=this;if(this.selectedRowKeys.length<=0)this.$message.info("请先选择资产");else{var a=[],t=[];this.selectedRowKeys.forEach((function(s){e.overallData.forEach((function(e,l){s===e.assetCode&&(a.push(e.assetCode),t.push(e))}))})),this.$emit("status",a,t)}},redactCheckedDataFn:function(e){var a=this;this.$nextTick((function(){a.selectedRowKeys=e}))},handleCancel:function(){this.show=!1},getObjectKeyValueByOrganIdFn:function(){var e=this,a={organId:this.organId,projectName:""};this.$api.assets.getObjectKeyValueByOrganId(a).then((function(a){if(0===Number(a.data.code)){var t=a.data.data,l=[];t.forEach((function(e){l.push({name:e.projectName,value:e.projectId})})),e.projectData=[].concat(Object(s.a)(e.projectData),l)}else e.$message.error(a.data.message)}))},query:function(){var e=this;this.loading=!0;var a=this.selecData;this.$api.assets.assetListPage(a).then((function(a){if(0===Number(a.data.code)){var t=a.data.data.data;if(t){var s=i.e.deepClone(e.overallData);t.forEach((function(e,a){e.key=e.assetCode,s.push(e)})),e.tableData=t,e.count=a.data.data.count,e.$nextTick((function(){var a={};s=s.reduce((function(e,t){return a[t.assetCode]||(a[t.assetCode]=e.push(t)),e}),[]),e.overallData=s}))}else e.data=[];e.loading=!1}else e.$message.error(a.data.message),e.loading=!1}))},handleChange:function(e){this.selecData.pageNum=e.pageNo,this.selecData.pageSize=e.pageLength,this.query()},approvalStatusFn:function(){}},created:function(){},mounted:function(){this.getObjectKeyValueByOrganIdFn(),this.query()}},r=(t("4958"),t("6691")),c=Object(r.a)(o,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("SG-Modal",{staticClass:"assetBundlePopover",attrs:{width:"1030px",title:"选择资产"},on:{ok:e.statusFn,cancel:e.handleCancel},model:{value:e.show,callback:function(a){e.show=a},expression:"show"}},[t("div",[t("Cephalosome",{staticClass:"Cephalosome",attrs:{rightCol:23,leftCol:1,rowHeight:"48px"}},[t("div",{attrs:{slot:"col-r"},slot:"col-r"},[t("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产项目",defaultValue:e.selecData.projectId},on:{change:e.approvalStatusFn}},e._l(e.projectData,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.value}},[e._v(e._s(a.name))])})),1),t("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产类型",defaultValue:e.selecData.assetType},on:{change:e.approvalStatusFn}},e._l(e.typeData,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.value}},[e._v(e._s(a.name))])})),1),t("a-select",{style:e.allStyle,attrs:{placeholder:"全部资产类别",defaultValue:e.selecData.objectType},on:{change:e.approvalStatusFn}},e._l(e.objectTypeData,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.value}},[e._v(e._s(a.name))])})),1),t("a-input",{staticStyle:{width:"140px",margin:"0 10px"},attrs:{placeholder:"资产名称/编码"},model:{value:e.selecData.assetNameCode,callback:function(a){e.$set(e.selecData,"assetNameCode",a)},expression:"selecData.assetNameCode"}}),t("SG-Button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")])],1)]),t("div",{staticClass:"tab-nav"},[t("div",{staticClass:"table-border table-layout-fixed"},[t("a-table",{staticClass:"custom-table td-pd10",attrs:{rowSelection:e.rowSelection,loading:e.loading,columns:e.columns,dataSource:e.tableData,pagination:!1}}),t("SG-FooterPagination",{attrs:{pageLength:e.selecData.pageSize,totalCount:e.count,noPageTools:e.noPageTools},on:{change:e.handleChange},model:{value:e.selecData.pageNum,callback:function(a){e.$set(e.selecData,"pageNum",a)},expression:"selecData.pageNum"}})],1)])],1)])}),[],!1,null,"6fb0e280",null);a.a=c.exports},"791f":function(e,a,t){"use strict";t("8f42");var s=t("4e72"),l={components:{ARow:s.Row,ACol:s.Col},props:{rowHeight:{type:String,default:"67px"},leftCol:{type:Number,default:6},rightCol:{type:Number,default:18}},data:function(){return{}},computed:{},methods:{},created:function(){},mounted:function(){}},i=(t("4d4b"),t("6691")),n=Object(i.a)(l,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"wrapper",style:{height:e.rowHeight}},[t("a-row",[t("a-col",{staticClass:"col-l nav",style:{height:e.rowHeight},attrs:{span:e.leftCol}},[e._t("col-l")],2),t("a-col",{staticClass:"col-r nav",style:{height:e.rowHeight},attrs:{span:e.rightCol}},[t("div",{staticClass:"commom"},[e._t("col-r")],2)])],1)],1)}),[],!1,null,"121da83b",null);a.a=n.exports},"97cd":function(e,a,t){"use strict";var s=t("a7a7");t.n(s).a},a7a7:function(e,a,t){},b0450:function(e,a,t){"use strict";t("4634");var s=t("dea4"),l=t("b85b"),i=t("73b2"),n=[{title:"资产名称",dataIndex:"assetName",width:"160"},{title:"资产编码",dataIndex:"assetCode",width:"160"},{title:"资产类型",dataIndex:"assetTypeName",width:"160"},{title:"资产项目名称",dataIndex:"projectName",width:"160"},{title:"所在位置",dataIndex:"position",width:"160"},{title:"面积(㎡)",dataIndex:"assetArea",width:"160"},{title:"规格",dataIndex:"specification",width:"160"},{title:"资产状态",dataIndex:"assetStatus",width:"160"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],o={components:{FormFooter:l.a,AssetBundlePopover:i.a},data:function(){return{pageType:"new",editable:!1,form:this.$form.createForm(this),allStyle:"width: 160px;",organId:"",organName:"",cleaningOrderId:"",cleaningOrderCode:"",projectId:void 0,projectName:"",projectIdOptions:[{label:"公建2019",value:"1"},{label:"廉租房2018",value:"2"}],assetType:void 0,assetTypeName:"",assetTypeOptions:[{label:"房屋",value:"1"},{label:"构筑物",value:"2"},{label:"设备",value:"3"}],cleanupType:void 0,cleanupTypeName:"",cleanupTypeOptions:[{label:"资产转让",value:"1"},{label:"资产报废",value:"2"},{label:"资产销售",value:"3"}],createByName:"",createTime:"",remark:"",files:[],columns:[].concat(n),dataSource:[],checkedData:[],auditor:"",auditTime:"",auditOpinion:""}},methods:{filterOption:function(e,a){return 0<=a.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())},addAsset:function(){this.$refs.assetBundlePopover.redactCheckedDataFn(this.checkedData),this.$refs.assetBundlePopover.show=!0},status:function(e,a){this.checkedData=Object(s.a)(e),a.forEach((function(e,a){e.key=e.assetCode})),this.dataSource=a,this.$refs.assetBundlePopover.show=!1},deleteFn:function(e){var a=this;this.dataSource.forEach((function(t,s){t.assetCode===e.assetCode&&a.dataSource.splice(s,1)})),this.checkedData.forEach((function(t,s){e.assetCode===t&&a.checkedData.splice(s,1)}))},validateRemark:function(e,a,t){200<a.length?t("备注长度不能超过200个字"):t()},handleSubmit:function(){this.form.validateFields((function(e,a){}))},submitAudit:function(){},cancel:function(){},approveAudit:function(){},rejectAudit:function(){this.auditOpinion||this.$message.warning("驳回时审核意见不能为空")}},mounted:function(){this.pageType=this.$route.query.pageType,this.editable="new"===this.pageType||"edit"===this.pageType,this.organId=this.$route.query.organId,this.organName=this.$route.query.organName,"new"!==this.pageType&&(this.cleaningOrderId=this.$route.query.cleaningOrderId),this.editable||(this.columns=this.columns.slice(0,this.columns.length-1))}},r=(t("97cd"),t("6691")),c=Object(r.a)(o,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"handle-clear-form"},[t("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[t("div",{staticClass:"edit-box"},[t("div",{staticClass:"edit-box-title"},[t("i"),t("span",[e._v("基础信息")])]),t("div",{staticClass:"edit-box-content"},[t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box",class:{required:e.editable}},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("清理单编号"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[e.editable?t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cleaningOrderCode",{rules:[{required:!0,max:30,whitespace:!0,message:"请输入清理单编号(不超过30字符)"}],initialValue:e.cleaningOrderCode}],expression:"['cleaningOrderCode',\n              {rules: [{required: true, max: 30, whitespace: true, message: '请输入清理单编号(不超过30字符)'}], initialValue: cleaningOrderCode}\n            ]"}],style:e.allStyle,attrs:{placeholder:"请输入清理单编号",max:30}}):t("span",{staticClass:"label-value"},[e._v(e._s(e.cleaningOrderCode||"--"))])],1)],1),t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box",class:{required:e.editable}},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("资产项目"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[e.editable?t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectId",{rules:[{required:!0,message:"请选择资产项目"}],initialValue:e.projectId}],expression:"['projectId',\n              {rules: [{required: true,  message: '请选择资产项目'}], initialValue: projectId}]"}],style:e.allStyle,attrs:{showSearch:"",allowClear:"",placeholder:"请选择资产项目",optionFilterProp:"children",options:e.projectIdOptions,filterOption:e.filterOption}}):t("span",{staticClass:"label-value"},[e._v(e._s(e.projectName||"--"))])],1)],1),t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box",class:{required:e.editable}},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("资产类型"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[e.editable?t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["assetType",{rules:[{required:!0,message:"请选择资产类型"}],initialValue:e.assetType}],expression:"['assetType',\n              {rules: [{required: true,  message: '请选择资产类型'}], initialValue: assetType}]"}],style:e.allStyle,attrs:{showSearch:"",allowClear:"",placeholder:"请选择资产类型",optionFilterProp:"children",options:e.assetTypeOptions,filterOption:e.filterOption}}):t("span",{staticClass:"label-value"},[e._v(e._s(e.assetTypeName||"--"))])],1)],1),t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box",class:{required:e.editable}},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("清理原因"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[e.editable?t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cleanupType",{rules:[{required:!0,message:"请选择清理原因"}],initialValue:e.cleanupType}],expression:"['cleanupType',\n              {rules: [{required: true,  message: '请选择清理原因'}], initialValue: cleanupType}]"}],style:e.allStyle,attrs:{showSearch:"",allowClear:"",placeholder:"请选择清理原因",mode:"multiple",tokenSeparators:[","],maxTagCount:1,optionFilterProp:"children",options:e.cleanupTypeOptions,filterOption:e.filterOption}}):t("span",{staticClass:"label-value"},[e._v(e._s(e.cleanupTypeName||"--"))])],1)],1),t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("所属机构"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[e.editable?t("a-input",{style:e.allStyle,attrs:{type:"text",disabled:""},model:{value:e.organName,callback:function(a){e.organName=a},expression:"organName"}}):t("span",{staticClass:"label-value"},[e._v(e._s(e.organName||"--"))])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("创建人"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[t("span",{staticClass:"label-value"},[e._v(e._s(e.createByName||"--"))])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("创建时间"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[t("span",{staticClass:"label-value"},[e._v(e._s(e.createTime||"--"))])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.editable,expression:"!editable"}],staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("备注"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",[t("span",{staticClass:"label-value"},[e._v(e._s(e.remark||"--"))])])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"edit-box-content-item total-width"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("备注"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",{staticClass:"label-value"},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark",{rules:[{validator:e.validateRemark}],initialValue:e.remark}],expression:"['remark',\n              {rules: [{validator: validateRemark}], initialValue: remark}]"}],attrs:{placeholder:"请输入描述（最多200字）",rows:3}})],1)],1),t("div",{staticClass:"edit-box-content-item total-width"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name",class:{"label-space-between":e.editable}},[e._v("附件"),t("i")]),t("span",[e._v("：")])]),t("a-form-item",{staticClass:"label-value"},[t("SG-UploadFile",{directives:[{name:"decorator",rawName:"v-decorator",value:["files",{rules:[],initialValue:e.files}],expression:"['files',\n              {rules: [], initialValue: files}]"}],attrs:{type:"all",show:!e.editable}}),e.editable||0!==e.files.length?e._e():t("span",{staticClass:"file-null"},[e._v("--")])],1)],1)])]),t("div",{staticClass:"edit-box"},[t("div",{staticClass:"edit-box-title"},[t("i"),t("span",[e._v("资产明细")])]),t("div",{staticClass:"edit-box-content"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.editable,expression:"editable"}],staticClass:"table-header-btn"},[t("SG-Button",{attrs:{type:"primary",weaken:""},on:{click:e.addAsset}},[e._v("添加资产")])],1),t("a-table",{staticClass:"custom-table",attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([{key:"operation",fn:function(a,s){return[t("a",{staticClass:"operation-btn",on:{click:function(a){return e.deleteFn(s)}}},[e._v("删除")])]}}])})],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:"audit"===e.pageType,expression:"pageType === 'audit'"}],staticClass:"edit-box"},[t("div",{staticClass:"edit-box-title"},[t("i"),t("span",[e._v("审核信息")])]),t("div",{staticClass:"edit-box-content"},[t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("审核人")]),t("span",[e._v("：")])]),t("a-form-item",[t("span",{staticClass:"label-value"},[e._v(e._s(e.auditor||"--"))])])],1),t("div",{staticClass:"edit-box-content-item"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("审核时间")]),t("span",[e._v("：")])]),t("a-form-item",[t("span",{staticClass:"label-value"},[e._v(e._s(e.auditTime||"--"))])])],1),t("div",{staticClass:"edit-box-content-item total-width"},[t("div",{staticClass:"label-name-box"},[t("span",{staticClass:"label-name"},[e._v("审核意见")]),t("span",[e._v("：")])]),t("a-form-item",{staticClass:"label-value"},[t("a-textarea",{attrs:{placeholder:"请输入审核意见",rows:3},model:{value:e.auditOpinion,callback:function(a){e.auditOpinion=a},expression:"auditOpinion"}})],1)],1)])])]),t("form-footer",{directives:[{name:"show",rawName:"v-show",value:"new"===e.pageType||"edit"===e.pageType,expression:"pageType === 'new' || pageType === 'edit'"}],attrs:{leftButtonName:"提交审核",rightButtonName:"取消"},on:{save:e.handleSubmit,cancel:e.cancel}}),t("form-footer",{directives:[{name:"show",rawName:"v-show",value:"audit"===e.pageType,expression:"pageType === 'audit'"}],attrs:{leftButtonName:"审核通过",rightButtonName:"驳回",rightButtonType:"danger"},on:{save:e.approveAudit,cancel:e.rejectAudit}}),t("AssetBundlePopover",{ref:"assetBundlePopover",on:{status:e.status}})],1)}),[],!1,null,"e8623652",null);a.a=c.exports},b85b:function(e,a,t){"use strict";var s={name:"FormFooter",components:{AButton:t("4e72").Button},props:{rightButtonName:{type:String,default:"取消"},leftButtonName:{type:String,default:"提交"},showSave:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},rightButtonType:{type:String,default:"default"}},data:function(){return{}}},l=(t("5f43"),t("6691")),i=Object(l.a)(s,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"form-footer"},[e._t("default",[e.showSave?t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$emit("save")}}},[e._v(e._s(e.leftButtonName))]):e._e(),e.showCancel?t("a-button",{attrs:{type:e.rightButtonType},on:{click:function(a){return e.$emit("cancel")}}},[e._v(e._s(e.rightButtonName))]):e._e()])],2)}),[],!1,null,"7f311a34",null);a.a=i.exports},dabf:function(e,a,t){},eb11:function(e,a,t){}}]);