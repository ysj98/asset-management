(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0cbc7cf4"],{"35a3":function(e,t,a){},"4b26":function(e,t,a){"use strict";a.r(t),a("efce"),a("4634"),a("ed8b");var i=a("dea4"),r=(a("e6d1"),a("97a3")),o=a("b85b"),s=a("fa7d"),n=a("c32d"),l=a.n(n);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}!function(e){arguments.length}();var c={width:"100%"},p={index:"/buildingDict"},m={components:{FormFooter:o.a},data:function(){return{type:"",allWidth:c,organOpt:[],buildOpt:[],unitOpt:[],floorOpt:[],houseCategoryOpt:[],houseTypeOpt:[],resTypeOpt:[],planeFigurePath:[],filepaths:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},formItemLayout2:{labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:20}}}}},mounted:function(){this.queryNodesByRootCode("20"),this.queryNodesByRootCode("60"),this.type=this.$route.query.type,"create"===this.type&&this.queryAllTopOrganByUser(),"edit"===this.type&&(this.houseId=this.$route.query.houseId||"",this.organName=this.$route.query.organName||"",this.organId=this.$route.query.organId||"",this.queryHouseDetailById()),"copy"===this.type&&(this.organId=this.$route.query.organId||"",this.houseId=this.$route.query.houseId||"",this.queryHouseDetailById())},beforeCreate:function(){this.form=this.$form.createForm(this)},methods:{handleSave:function(){var e=this;this.form.validateFields((function(t,a){if(!t){var i={};s.e.each(a,(function(e,t){i[t]=e||""})),i.deliveryTime&&(i.deliveryTime=i.deliveryTime.format("YYYY-MM-DD")),i.repairTime&&(i.repairTime=i.repairTime.format("YYYY-MM-DD")),e.planeFigurePath.length&&(i.planeFigurePath=e.planeFigurePath[0].url),e.filepaths.length&&(i.filepaths=e.filepaths.map((function(e){return e.url})).join(",")),"create"!==e.type&&"copy"!==e.type||e.$api.building.addHouse(i).then((function(t){"0"===t.data.code?(e.$SG_Message.success("新增房间成功"),e.goPage("index")):e.$message.error(t.data.message)})),"edit"===e.type&&(i.houseId=e.houseId,e.$api.building.updateHouse(i).then((function(t){"0"===t.data.code?(e.$SG_Message.success("编辑楼房间成功"),e.goPage("index")):e.$message.error(t.data.message)})))}}))},handleCancel:function(){this.goPage("index")},queryHouseDetailById:function(){var e=this,t={houseId:this.houseId};this.$api.building.queryHouseDetailById(t).then((function(t){"0"===t.data.code?e.handleEditData(u({},t.data.data)):e.$message.error(t.data.message)}))},handleEditData:function(e){if(e.repairTime&&(e.repairTime=l()(e.repairTime,"YYYY-MM-DD")),e.deliveryTime&&(e.deliveryTime=l()(e.deliveryTime,"YYYY-MM-DD")),this.form.setFieldsValue({organId:this.organId,buildId:e.buildId||void 0,unitId:e.unitId||void 0,floorId:e.floorId||void 0,roomNo:e.roomNo||void 0,area:e.area||void 0,shareArea:e.shareArea||void 0,innerArea:e.innerArea||void 0,houseCategory:e.houseCategory||void 0,houseType:e.houseType||void 0,resType:e.resType||void 0,houseMode:e.houseMode||void 0,face:e.face||void 0,description:e.description||void 0,code:e.code||void 0,deliveryTime:e.deliveryTime||void 0,repairTime:e.repairTime||void 0}),e.planeFigurePath&&(this.planeFigurePath=[{url:e.planeFigurePath,name:""}]),e.filepaths){var t=e.filepaths.split(",");this.filepaths=t.map((function(e){return{url:e,name:""}}))}"edit"===this.type&&(this.organOpt=[{label:e.organName,value:this.organId}],this.buildOpt=[{label:e.buildName,value:e.buildId}],this.unitOpt=[{label:e.unitName,value:e.unitId}]),"copy"===this.type&&(this.queryAllTopOrganByUser(),this.queryBuildList(this.organId),this.getOptions("getUnitByBuildId",e.buildId)),e.unitId?this.queryAddFloorOptions(e.unitId,"1"):this.queryAddFloorOptions(e.buildId,"0"),this.queryChildNodesById(e.houseCategoryId)},watchOrganChange:function(e){this.form.setFieldsValue({buildId:void 0,unitId:void 0,floorId:void 0}),this.buildOpt=[],this.unitOpt=[],this.floorOpt=[],e&&this.queryBuildList(e)},watchBuildChange:function(e){this.form.setFieldsValue({unitId:void 0,floorId:void 0}),this.unitOpt=[],this.floorOpt=[],e&&(this.getOptions("getUnitByBuildId",e),this.queryAddFloorOptions(e,"0"))},watchUnitChange:function(e){this.form.setFieldsValue({floorId:void 0}),this.floorOpt=[],e&&this.queryAddFloorOptions(e,"1")},watchHouseCategory:function(e){if(this.form.setFieldsValue({houseType:void 0}),this.houseTypeOpt=[],e){var t=this.houseCategoryOpt.filter((function(t){return e===t.typeCode}));this.queryChildNodesById(t[0].typeId)}},getOptions:function(e,t){if(e){var a="",r=[];"getUnitByBuildId"===e&&(a="#BUILD_ID:"+(1<arguments.length&&void 0!==t?t:""),this.unitOpt=r);var o={SQL_CODE:e,PARAMS:a};this.$api.basics.getOptions(o).then((function(e){if("0"===e.data.code){var t=e.data.data||[];r.push.apply(r,Object(i.a)(t.map((function(e){return{label:e.C_TEXT,value:e.C_VALUE}}))))}}))}},queryAddFloorOptions:function(e,t){var a=this;this.$api.basics.queryFloorListByPosId({positionId:e,subPositionType:t}).then((function(e){"0"===e.data.code&&(a.floorOpt=e.data.data.map((function(e){return{label:e.floorName,value:e.floorId+"",key:e.floorId+""}})))}))},queryNodesByRootCode:function(e){var t=this,a={categoryCode:e};return this.$api.basics.queryNodesByRootCode(a).then((function(a){if("0"===a.data.code){var r=(a.data.data||[]).map((function(e){return u({label:e.typeName,value:e.typeCode},e)}));"20"===e&&(t.houseCategoryOpt=Object(i.a)(r)),"60"===e&&(t.resTypeOpt=Object(i.a)(r))}}))},queryChildNodesById:function(e){var t=this,a={typeId:e};this.$api.basics.queryChildNodesById(a).then((function(e){if("0"===e.data.code){var a=(e.data.data||[]).map((function(e){return u({label:e.typeName,value:e.typeCode},e)}));t.houseTypeOpt=Object(i.a)(a)}}))},queryAllTopOrganByUser:function(){var e=this;this.$api.basics.queryAllTopOrganByUser({}).then((function(t){if("0"===t.data.code){var a=t.data.data||[];e.organOpt=a.map((function(e){return{label:e.organName,value:e.organId}})),e.organOpt.length&&(e.form.setFieldsValue({organId:e.organOpt[0].value}),e.queryBuildList(e.organOpt[0].value))}}))},queryBuildList:function(e,t){var a=this;this.$api.basics.queryBuildList({organId:e,buildName:t||""}).then((function(e){if("0"===e.data.code){var t=e.data.data||[];a.buildOpt=t.map((function(e){return{label:e.buildName,value:e.buildId}}))}}))},goPage:function(e){this.$router.push({path:p[e],query:{}})},handleSearch:function(e){this.searchBuildName=e,this.debounceMothed()},debounceMothed:Object(s.b)((function(){var e=this.form.getFieldsValue(["organId"]);this.queryBuildList(e.organId||"",this.searchBuildName||"")}),300),filterOption:function(e,t){return 0<=t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())}}},h=(a("93fa"),a("efed"),a("6691")),f=Object(h.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createHouse-page"},[a("div",{staticClass:"create-form"},[a("a-form",{attrs:{form:e.form,layout:"horizontal"},on:{submit:e.handleSave}},[a("div",{staticClass:"page-item"},[a("div",{staticClass:"mb30"},[a("SG-Title",{attrs:{noMargin:"",title:"基础信息"}})],1),a("div",{staticClass:"form-content"},[a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"项目名称"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["organId",{rules:[{required:!0,message:"请选择所属项目"}]}],expression:"['organId',\n                   { rules: [{required: true, message: '请选择所属项目'}]}\n                 ]"}],style:e.allWidth,attrs:{placeholder:"请选择项目",disabled:"edit"===e.type,showSearch:"",optionFilterProp:"children",options:e.organOpt,allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到数据"},on:{change:e.watchOrganChange}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"楼栋"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["buildId",{rules:[{required:!0,message:"请选择楼栋"}]}],expression:"['buildId',\n                   { rules: [{required: true, message: '请选择楼栋'}]}\n                 ]"}],style:e.allWidth,attrs:{placeholder:"请选择楼栋",disabled:"edit"===e.type,showSearch:"",optionFilterProp:"children",options:e.buildOpt,allowClear:!1,filterOption:!1,notFoundContent:"没有查询到数据"},on:{change:e.watchBuildChange,search:e.handleSearch}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"单元"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["unitId"],expression:"['unitId']"}],style:e.allWidth,attrs:{placeholder:"edit"===e.type?"--":"请选择单元",disabled:"edit"===e.type,showSearch:"",optionFilterProp:"children",options:e.unitOpt,allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到数据"},on:{change:e.watchUnitChange}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"楼层"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["floorId",{rules:[{required:!0,message:"请选择楼层"}]}],expression:"['floorId',\n                   { rules: [{required: true, message: '请选择楼层'}]}\n                 ]"}],style:e.allWidth,attrs:{placeholder:"请选择楼层",showSearch:"",optionFilterProp:"children",options:e.floorOpt,allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到数据"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"房号"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roomNo",{initialValue:void 0,rules:[{required:!0,message:"请输入房号"}]}],expression:"['roomNo', {initialValue: '' || undefined, rules: [{required: true, message: '请输入房号'}]}]"}],style:e.allWidth})],1)],1)],1)],1)]),a("div",{staticClass:"page-item"},[a("div",{staticClass:"mb30"},[a("SG-Title",{attrs:{noMargin:"",title:"面积信息"}})],1),a("div",{staticClass:"form-content"},[a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"建筑面积"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["area",{initialValue:void 0,rules:[{required:!0,message:"请输入建筑面积"}]}],expression:"['area', {initialValue: '' || undefined, rules: [{required: true, message: '请输入建筑面积'}]}]"}],style:e.allWidth})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"分摊面积"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["shareArea",{initialValue:void 0}],expression:"['shareArea', {initialValue: '' || undefined }]"}],style:e.allWidth})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"套内面积"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["innerArea",{initialValue:void 0}],expression:"['innerArea', {initialValue: '' || undefined }]"}],style:e.allWidth})],1)],1)],1)],1)]),a("div",{staticClass:"page-item"},[a("div",{staticClass:"mb30"},[a("SG-Title",{attrs:{noMargin:"",title:"分类信息"}})],1),a("div",{staticClass:"form-content"},[a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"建筑形态"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["houseCategory",{rules:[{required:!0,message:"请选择建筑形态"}]}],expression:"['houseCategory',\n                   { rules: [{required: true, message: '请选择建筑形态'}]}\n                 ]"}],style:e.allWidth,attrs:{placeholder:"请选择建筑形态",showSearch:"",optionFilterProp:"children",options:e.houseCategoryOpt,allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到数据"},on:{change:e.watchHouseCategory}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"房间类型"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["houseType",{rules:[{required:!0,message:"请选择房间类型"}]}],expression:"['houseType',\n                   { rules: [{required: true, message: '请选择房间类型'}]}\n                 ]"}],style:e.allWidth,attrs:{placeholder:"请选择房间类型",showSearch:"",optionFilterProp:"children",options:e.houseTypeOpt,allowClear:!1,filterOption:e.filterOption,notFoundContent:"没有查询到数据"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"房间用途"}},"a-form-item",e.formItemLayout,!1),[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["resType"],expression:"['resType']"}],style:e.allWidth,attrs:{placeholder:"请选择房间用途",showSearch:"",optionFilterProp:"children",options:e.resTypeOpt,allowClear:!0,filterOption:e.filterOption,notFoundContent:"没有查询到数据"}})],1)],1)],1)],1)]),a("div",{staticClass:"page-item"},[a("div",{staticClass:"mb30"},[a("SG-Title",{attrs:{noMargin:"",title:"详细信息"}})],1),a("div",{staticClass:"form-content"},[a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"户型"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["houseMode",{initialValue:void 0}],expression:"['houseMode', {initialValue: '' || undefined}]"}],style:e.allWidth,attrs:{maxLength:30}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"朝向"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["face",{initialValue:void 0}],expression:"['face', {initialValue: '' || undefined}]"}],style:e.allWidth})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"房间编码"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{initialValue:void 0}],expression:"['code', {initialValue: '' || undefined}]"}],style:e.allWidth,attrs:{maxLength:30}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"交付日期"}},"a-form-item",e.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["deliveryTime",{initialValue:void 0}],expression:"['deliveryTime', {initialValue: '' || undefined}]"}],style:e.allWidth})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",e._b({attrs:{label:"保修到期日期"}},"a-form-item",e.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["repairTime",{initialValue:void 0}],expression:"['repairTime', {initialValue: '' || undefined}]"}],style:e.allWidth})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",e._b({attrs:{label:"描述"}},"a-form-item",e.formItemLayout2,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:""}],expression:"['description', {initialValue: ''}]"}]})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",e._b({attrs:{label:"平面图"}},"a-form-item",e.formItemLayout2,!1),[a("SG-UploadFile",{attrs:{max:1},model:{value:e.planeFigurePath,callback:function(t){e.planeFigurePath=t},expression:"planeFigurePath"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-item",e._b({attrs:{label:"附件"}},"a-form-item",e.formItemLayout2,!1),[a("SG-UploadFile",{attrs:{type:"all"},model:{value:e.filepaths,callback:function(t){e.filepaths=t},expression:"filepaths"}})],1)],1)],1)],1)])])],1),a("FormFooter",{on:{save:e.handleSave,cancel:e.handleCancel}})],1)}),[],!1,null,"2ec4bc0e",null);t.default=f.exports},"4cbb":function(e,t,a){},"5f43":function(e,t,a){"use strict";var i=a("eb11");a.n(i).a},"93fa":function(e,t,a){"use strict";var i=a("35a3");a.n(i).a},b85b:function(e,t,a){"use strict";var i={name:"FormFooter",components:{AButton:a("4e72").Button},props:{rightButtonName:{type:String,default:"取消"},leftButtonName:{type:String,default:"提交"},showSave:{type:Boolean,default:!0},showCancel:{type:Boolean,default:!0},rightButtonType:{type:String,default:"default"}},data:function(){return{}}},r=(a("5f43"),a("6691")),o=Object(r.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-footer"},[e._t("default",[e.showSave?a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("save")}}},[e._v(e._s(e.leftButtonName))]):e._e(),e.showCancel?a("a-button",{attrs:{type:e.rightButtonType},on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.rightButtonName))]):e._e()])],2)}),[],!1,null,"7f311a34",null);t.a=o.exports},eb11:function(e,t,a){},efed:function(e,t,a){"use strict";var i=a("4cbb");a.n(i).a}}]);